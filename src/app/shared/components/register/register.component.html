<mat-card id="register-card">
  <mat-card-header>
    <mat-card-title>Реєстрація</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      <mat-form-field appearance="standard">
        <mat-label>Email<span>*</span></mat-label>
        <input matInput type="email" formControlName="username">
        <mat-error
          *ngIf="registerForm.get('username').hasError('email') &&  !registerForm.get('username').hasError('required')">
          Будь-ласка, введіть дійсну Email адресу
        </mat-error>
        <mat-error *ngIf="registerForm.get('username').hasError('required') && registerForm.get('username').touched">
          Обов'язково введіть ваш Email
        </mat-error>
      </mat-form-field>

      <div formGroupName="passwords">
        <mat-form-field appearance="standard">
          <mat-label>Пароль<span>*</span></mat-label>
          <input matInput type="password" formControlName="password">
          <mat-error
            *ngIf="registerForm.get('passwords.password').hasError('pattern') &&  !registerForm.get('passwords.password').hasError('required')">
            Пароль має містити мінімум 6 символів: букви обох регістрів та цифри
          </mat-error>
          <mat-error *ngIf="registerForm.get('passwords.password').hasError('required') && registerForm.get('passwords.password').touched">
            Обов'язково введіть ваш пароль
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="standard">
          <mat-label>Повторіть пароль<span>*</span></mat-label>
          <input matInput type="password" formControlName="repeat_password" [errorStateMatcher]="matcher">
          <mat-error *ngIf="(registerForm.hasError('notSame', 'passwords'))">
            Паролі не співпадають
          </mat-error>
          <mat-error *ngIf="registerForm.get('passwords.repeat_password').hasError('required') && registerForm.get('passwords.repeat_password').touched">
            Обов'язково повторно введіть пароль
          </mat-error>
        </mat-form-field>
      </div>

      <mat-form-field appearance="standard">
        <mat-label>Ім'я<span>*</span></mat-label>
        <input matInput type="text" formControlName="first_name">
        <mat-error
          *ngIf="registerForm.get('first_name').hasError('pattern') &&  !registerForm.get('first_name').hasError('required')">
          Введіть ваше ім'я
        </mat-error>
        <mat-error
          *ngIf="registerForm.get('first_name').hasError('required') && registerForm.get('first_name').touched">
          Обов'язково введіть ваше ім'я
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="standard">
        <mat-label>Прізвище<span>*</span></mat-label>
        <input matInput type="text" formControlName="last_name">
                <mat-error *ngIf="registerForm.get('last_name').hasError('pattern') &&  !registerForm.get('last_name').hasError('required')" >
                  Будь-ласка, введіть ваше прізвище (тільки літери)
                </mat-error>
                <mat-error *ngIf="registerForm.get('last_name').hasError('required') && registerForm.get('last_name').touched">
                  Обов'язково введіть ваше прізвище
                </mat-error>
      </mat-form-field>

      <mat-form-field appearance="standard">
        <mat-label>Номер телефону<span>*</span></mat-label>
        <input matInput type="text" formControlName="phone" placeholder="+380665551799">
                <mat-error *ngIf="registerForm.get('phone').hasError('pattern') &&  !registerForm.get('phone').hasError('required')" >
                  Будь-ласка, введіть дійсний номер телефону
                </mat-error>
                <mat-error *ngIf="registerForm.get('phone').hasError('required') && registerForm.get('phone').touched">
                  Обов'язково введіть ваш номер телефону
                </mat-error>
      </mat-form-field>

      <mat-form-field appearance="standard">
        <mat-label>Стать</mat-label>
        <mat-select formControlName="sex">
          <mat-option *ngFor="let gender of genders" [value]="gender.value">{{gender.name}}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="standard">
        <mat-label>Дата народження</mat-label>
        <input formControl="birthday" matInput [matDatepicker]="picker" [min]="minDate" [max]="maxDate" placeholder="MM-DD-YYYY">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker startView="multi-year"></mat-datepicker>
        <mat-error *ngIf="registerForm.get('birthday').invalid && registerForm.get('birthday').touched"></mat-error>
      </mat-form-field>
    </form>
  </mat-card-content>
  <mat-card-actions>
    <button type="submit" mat-raised-button id="register-btn" [disabled]="registerForm.invalid || registerForm.disabled"
    (click)="onSubmit()">Зареєструватись</button>
    <button mat-stroked-button id="close-btn" (click)="closeDialog()">Закрити</button>
  </mat-card-actions>
</mat-card>
